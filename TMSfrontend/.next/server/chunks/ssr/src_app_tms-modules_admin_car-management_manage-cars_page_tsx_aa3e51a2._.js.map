{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/A/Desktop/Internship/ERP-dashboards%20-%20Copy/ERP-dashboard/src/app/tms-modules/admin/car-management/manage-cars/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { fetchCars, createCar, updateCar, deleteCar } from '../api/carService';\r\nimport CarTable from './CarTable';\r\nimport CarForm from './CarForm';\r\nimport Stats from './Stats';\r\nimport { Car } from '../types';\r\n\r\nconst ManageCars = () => {\r\n  const [cars, setCars] = useState<Car[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingCar, setEditingCar] = useState<Car | null>(null);\r\n\r\n  useEffect(() => {\r\n    const loadCars = async () => {\r\n      try {\r\n        const response = await fetchCars();\r\n        if (response.success) {\r\n          setCars(response.data);\r\n        } else {\r\n          throw new Error(response.message || 'Failed to load cars');\r\n        }\r\n      } catch (error) {\r\n        Swal.fire({\r\n          title: 'Error!',\r\n          text: error instanceof Error ? error.message : 'Failed to load cars',\r\n          icon: 'error',\r\n          showClass: { popup: 'animate__animated animate__shakeX' }\r\n        });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadCars();\r\n  }, []);\r\n\r\n  const handleSubmit = async (carData: Car) => {\r\n    try {\r\n      let response;\r\n      if (editingCar) {\r\n        response = await updateCar(carData.id, carData);\r\n      } else {\r\n        response = await createCar(carData);\r\n      }\r\n\r\n      if (response.success) {\r\n        setCars(prev => \r\n          editingCar \r\n            ? prev.map(c => c.id === carData.id ? response.data : c)\r\n            : [...prev, response.data]\r\n        );\r\n        \r\n        Swal.fire({\r\n          title: 'Success!',\r\n          text: `Car ${editingCar ? 'updated' : 'registered'} successfully`,\r\n          icon: 'success',\r\n          showClass: { popup: 'animate__animated animate__bounceIn' }\r\n        });\r\n        \r\n        setShowForm(false);\r\n        setEditingCar(null);\r\n      } else {\r\n        throw new Error(response.message || 'Operation failed');\r\n      }\r\n    } catch (error) {\r\n      Swal.fire({\r\n        title: 'Error!',\r\n        text: error instanceof Error ? error.message : 'Operation failed',\r\n        icon: 'error',\r\n        showClass: { popup: 'animate__animated animate__shakeX' }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    try {\r\n      const response = await deleteCar(id);\r\n      if (response.success) {\r\n        setCars(prev => prev.filter(car => car.id !== id));\r\n      } else {\r\n        throw new Error(response.message || 'Deletion failed');\r\n      }\r\n    } catch (error) {\r\n      throw error; // Error is handled in CarTable component\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <motion.div\r\n          animate={{ rotate: 360 }}\r\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n          className=\"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5 }}\r\n      >\r\n        <Stats cars={cars} />\r\n      </motion.div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-lg p-6\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <motion.h2 \r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            transition={{ delay: 0.2 }}\r\n            className=\"text-2xl font-bold text-gray-800\"\r\n          >\r\n            Car Management\r\n          </motion.h2>\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            onClick={() => {\r\n              setEditingCar(null);\r\n              setShowForm(true);\r\n            }}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Add New Car\r\n          </motion.button>\r\n        </div>\r\n\r\n        <CarTable\r\n          cars={cars}\r\n          onEdit={(car) => {\r\n            setEditingCar(car);\r\n            setShowForm(true);\r\n          }}\r\n          onDelete={handleDelete}\r\n        />\r\n      </div>\r\n\r\n      {showForm && (\r\n        <CarForm\r\n          car={editingCar}\r\n          onClose={() => {\r\n            setShowForm(false);\r\n            setEditingCar(null);\r\n          }}\r\n          onSubmit={handleSubmit}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageCars;"],"names":[],"mappings":"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","debugId":null}}]
}